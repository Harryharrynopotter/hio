{% extends 'base.html' %}
{% load staticfiles %}
{% block title %}首页{% endblock %}
{% block console-content %}

    <div class="page-title-box">
        <h4 class="page-title">Fear Of God</h4>
    </div>
    <!-- start 标签 row-->
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-body">
                    <button id="fog-bp" type="button" class="btn btn-primary">手动制作</button>
                    <button id="fog-auto-bp" type="button" class="btn btn btn-outline-primary">自动BP</button>
                    <button id="fog-add-bot" type="button" class="btn btn-dark btn-rounded" style="position: relative;float: right;">增加BOT</button>
                    <button id="fog-del-bot" type="button" class="btn btn-light btn-rounded" style="position: relative;float: right;">减少BOT</button>
                    <div class="form-group row" style="margin-top: 1rem;">
                        <div class="col-sm-10" style="max-width: 50%">
                            <div class="input-group">
                                <input type="text" id="url" class="form-control" placeholder="批量打开网址" aria-label="Recipient's username">
                            <div class="input-group-append">
                                <button id="fog-mass-url" type="button" class="btn btn btn-outline-primary">打开</button>
                            </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row" style="margin-top: 1rem;">
                        <div class="col-sm-10" style="max-width: 50%">
                            <div class="input-group">
                                <input type="text" id="atc" class="form-control" placeholder="快速建立任务" value="https://www.theclosetinc.com/collections/mens-footwear/products/pro-bounce-2019">
                            <div class="input-group-append">
                                <button id="atc-button" type="button" class="btn btn btn-outline-primary">开始</button>
                            </div>
                            </div>
                        </div>
                    </div>
                    <!-- start BOT Status row-->
                    <div class="row">
                        <div class="col-md-6" style="flex: 0 0 100%; max-width: 100%;">
                            <ul class="nav nav-tabs mb-3">

                                <li class="nav-item">
                                    <a href="#Bots" data-toggle="tab" aria-expanded="false" class="nav-link active">
                                                    <i class="fe-chrome"></i> Robots(10)
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="#Monitor" data-toggle="tab" aria-expanded="true" class="nav-link">
                                                    <i class="fe-eye-off"></i> Monitor(Off)
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="#Tasks" data-toggle="tab" aria-expanded="false" class="nav-link">
                                                    <i class="fe-pause"></i> Tasks(None)
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="#Orders" data-toggle="tab" aria-expanded="false" class="nav-link">
                                                    <i class="fe-send"></i> Orders(None)
                                    </a>
                                </li>
                            </ul>
                            <div class="tab-content">
                                <div class="tab-pane show active" id="Bots">
                                    <table class="table table-hover mb-0">
                                        <thead>
                                        <tr>
                                            <th>Bot Name</th>
                                            <th>Bypass Key</th>
                                            <th>Update time</th>
                                            <th>Status</th>
                                            <th>Action</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        {% for b in key_list %}
                                        <tr>
                                            <td style="vertical-align: inherit;padding: .6rem;">{{ b.browser_name }}</td>
                                            <td style="vertical-align: inherit;padding: .6rem;">{{ b.bypass_key }}</td>
                                            <td style="vertical-align: inherit;padding: .6rem;">{{ b.created }}</td>
                                            <td style="vertical-align: inherit;padding: .6rem;">{{ b.bypass_status }}</td>
                                            <td style="vertical-align: inherit;padding: .6rem;"><button type="button" class="btn btn-primary btn-sm">Setting</button></td>
                                        </tr>
                                        {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                                <div class="tab-pane" id="Monitor">
                                    <table class="table table-hover mb-0">
                                        <thead>
                                        <tr>
                                            <th>Bot Name</th>
                                            <th>Bypass Key</th>
                                            <th>Update time</th>
                                            <th>Status</th>
                                            <th>Action</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        {% for b in key_list %}
                                        <tr>
                                            <td style="vertical-align: inherit;padding: .6rem;">{{ b.browser_name }}</td>
                                            <td style="vertical-align: inherit;padding: .6rem;">{{ b.bypass_key }}</td>
                                            <td style="vertical-align: inherit;padding: .6rem;">{{ b.created }}</td>
                                            <td style="vertical-align: inherit;padding: .6rem;">{{ b.bypass_status }}</td>
                                            <td style="vertical-align: inherit;padding: .6rem;"><button type="button" class="btn btn-primary btn-sm">Setting</button></td>
                                        </tr>
                                        {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                                <div class="tab-pane" id="Tasks">
                                    <p>内容3</p>
                                </div>
                                <div class="tab-pane" id="Orders">
                                    <p>内容3</p>
                                </div>
                            </div>
                        </div> <!-- end col -->
                    </div> <!-- end row -->
                </div> <!-- end card-body-->
            </div> <!-- end card-->
        </div> <!-- end col-->
    </div> <!-- end row-->
    <!-- end BYPASS状态 ow-->
    <!-- start 商品状态 row-->
    <!-- end 商品状态 row-->
    <script>
        let id = "#fog-bp";
        let add = "#fog-add-bot";
        let del = "#fog-del-bot";
        let mass = "#fog-mass-url";
        let atc = "#atc-button";
        $.ajaxSetup({
            data: {csrfmiddlewaretoken: '{{ csrf_token }}' },
        });
        $(id).click(function(){
            $(id).attr("disabled","disabled");
            $(id).attr("class","btn btn-secondary");
            $(id).text("正在制作");
          $.post("{% url 'makeBypass' %}",
              {"id":id},
          function(){
            $(id).removeAttr("disabled");
            $(id).attr("class","btn btn-primary");
            $(id).text("手动制作");
            });
        });
        $(add).click(function(){
            $(add).attr("disabled","disabled");
            $(add).attr("class","btn btn-secondary btn-rounded");
            $(add).text("正在制造");
          $.post("{% url 'addBot' %}",
          {"id":add},
          function(){
            alert("添加成功！");
            $(add).removeAttr("disabled");
            $(add).attr("class","btn btn-dark btn-rounded");
            $(add).text("增加BOT");
            });
        });
        $(mass).click(function(){
            let url = $("#url").val();
            $(mass).attr("disabled","disabled");
            $(mass).attr("class","btn btn-secondary");
            $(mass).text("正在打开...");
          $.post("{% url 'massURL' %}",
              {"url": url,"id": mass},
          function(){
            $(mass).removeAttr("disabled");
            $(mass).attr("class","btn btn-primary");
            $(mass).text("打开");
            });
        });
        $(del).click(function(){
            $(del).attr("disabled","disabled");
            $(del).attr("class","btn btn-secondary btn-rounded");
            $(del).text("正在删除");
          $.post("{% url 'delBot' %}",
          {"id":del},
          function(){
            alert("成功删除了一个BOT");
            $(del).removeAttr("disabled");
            $(del).attr("class","btn btn-dark btn-rounded");
            $(del).text("减少BOT");
            });
        });
        $(atc).click(function(){
            let url = $("#atc").val();
            $(atc).attr("disabled","disabled");
            $(atc).attr("class","btn secondary");
            $(atc).text("正在进行");
          $.post("{% url 'atc' %}",
          {"url":url},
          function(){
            $(atc).removeAttr("disabled");
            $(atc).attr("class","btn btn-primary");
            $(atc).text("开始");
            });
        });
    </script>
{% endblock console-content %}
